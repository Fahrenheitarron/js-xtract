<html lang="en">
    <head>
        <script src="jsXtract.js"></script>
        <script>
            var wave, wave_f0, sample_rate;
            window.onload = function() {
                var resultsDiv = document.getElementById("results");
                var resultsSpan;
                var N = 1024;
                sample_rate = 44100.0;
                wave_f0 = sample_rate/(N>>2);
                wave = new Float64Array(N);
                for (var n=0; n<N; n++) {
                    wave[n] = Math.cos(2.0*Math.PI*wave_f0*(n/sample_rate));
                }
                var mean, vari, std, avd;
                mean = xtract_mean(wave);
                vari = xtract_variance(wave);
                std = xtract_standard_deviation(wave,vari);
                avd = xtract_average_deviation(wave,mean);
                var skew = xtract_skewness(wave,mean,std);
                var kurtosis = xtract_kurtosis(wave,mean,std);
                
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Mean: "+mean;
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Var: "+vari;
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "STD: "+std;
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "AVD: "+avd;
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Skew: "+skew;
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Kurt: "+kurtosis;
                resultsDiv.appendChild(resultsSpan);
                
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "ZCR: "+xtract_zcr(wave);
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "RMS Amplitude: "+xtract_rms_amplitude(wave);
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Lowest Value: "+xtract_lowest_value(wave);
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Lowest Value (NZ): "+xtract_lowest_value(wave,0.0);
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Highest Value: "+xtract_highest_value(wave);
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Sum: "+xtract_sum(wave);
                resultsDiv.appendChild(resultsSpan);
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "Non-zero count: "+xtract_nonzero_count(wave);
                resultsDiv.appendChild(resultsSpan);
                
                resultsSpan = document.createElement("f0");
                resultsSpan.textContent = "f0: "+xtract_f0(wave,sample_rate);
                resultsDiv.appendChild(resultsSpan);
                
                var wavelet_state = xtract_init_wavelet();
                resultsSpan = document.createElement("p");
                resultsSpan.textContent = "f0 (wavelet): "+xtract_wavelet_f0(wave,sample_rate,wavelet_state);
                resultsDiv.appendChild(resultsSpan);
            }
        </script>
    </head>
    <body>
        <div>
            <h1>jsXtract Test Results</h1>
        </div>
        <div>
            <span>Results of the test will be shown below</span>
        </div>
        <div id="results">
        </div>
    </body>
</html>